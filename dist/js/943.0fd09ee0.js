"use strict";(self["webpackChunkzalo_fe"]=self["webpackChunkzalo_fe"]||[]).push([[943],{1943:function(e,l,a){a.r(l),a.d(l,{default:function(){return me}});var t=a(641),n=a(33);const s=e=>((0,t.Qi)("data-v-562f7a14"),e=e(),(0,t.jt)(),e),i={class:"menu-page"},c={class:"toolbar"},d={class:"p-input-icon-left search"},u=s((()=>(0,t.Lk)("i",{class:"pi pi-search"},null,-1))),o={class:"toolbar-actions"},r={class:"content"},v={class:"tree-section"},h=s((()=>(0,t.Lk)("div",{class:"section-title"},"Danh mục",-1))),m={class:"tree-row"},k={class:"tree-col-name"},p={class:"tree-title"},L={key:1,class:"tree-muted"},f={class:"tree-col-right"},g=s((()=>(0,t.Lk)("small",{class:"hint"}," Hiển thị toàn bộ menu từ tất cả quyền hạn. ",-1))),b={class:"details-section"},C={key:0,class:"empty"},I={key:1,class:"details"},y={class:"detail-row"},_=s((()=>(0,t.Lk)("label",null,"ID:",-1))),T={class:"detail-value"},A={class:"detail-row"},w=s((()=>(0,t.Lk)("label",null,"Tên hiển thị:",-1))),E={class:"detail-value"},R={class:"detail-row"},K=s((()=>(0,t.Lk)("label",null,"Icon:",-1))),x={class:"detail-value"},F={class:"detail-row"},M=s((()=>(0,t.Lk)("label",null,"Route:",-1))),O={class:"detail-value"},U={class:"detail-row"},V=s((()=>(0,t.Lk)("label",null,"Trạng thái:",-1))),X={class:"detail-value"},D={class:"detail-row"},N=s((()=>(0,t.Lk)("label",null,"Loại:",-1))),S={class:"detail-value"},q={class:"detail-row"},Q=s((()=>(0,t.Lk)("label",null,"Quyền hạn:",-1))),W={class:"detail-value"},j={class:"stats-grid"},H={class:"stat-card"},z=s((()=>(0,t.Lk)("div",{class:"stat-label"},"Tổng menu Admin",-1))),J={class:"stat-value"},P={class:"stat-card"},$=s((()=>(0,t.Lk)("div",{class:"stat-label"},"Tổng menu User",-1))),B={class:"stat-value"},G={class:"stat-card"},Y=s((()=>(0,t.Lk)("div",{class:"stat-label"},"Tổng menu (tất cả)",-1))),Z={class:"stat-value"};function ee(e,l,a,s,ee,le){const ae=(0,t.g2)("InputText"),te=(0,t.g2)("Dropdown"),ne=(0,t.g2)("Tree"),se=(0,t.g2)("Panel");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(se,{header:"Xem tất cả danh mục menu (không phân quyền)"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",c,[(0,t.Lk)("span",d,[u,(0,t.bF)(ae,{modelValue:s.searchText,"onUpdate:modelValue":l[0]||(l[0]=e=>s.searchText=e),placeholder:"Tìm menu..."},null,8,["modelValue"])]),(0,t.Lk)("div",o,[(0,t.bF)(te,{modelValue:s.selectedRole,"onUpdate:modelValue":l[1]||(l[1]=e=>s.selectedRole=e),options:s.roleOptions,optionLabel:"label",optionValue:"value",placeholder:"Chọn quyền hạn",onChange:s.onRoleChange},null,8,["modelValue","options","onChange"])])]),(0,t.Lk)("div",r,[(0,t.Lk)("div",v,[h,(0,t.bF)(ne,{value:s.treeNodes,selectionMode:"single",selectionKeys:s.selectionKeys,onSelectionChange:s.onSelectionChange},{default:(0,t.k6)((({node:e})=>[(0,t.Lk)("div",m,[(0,t.Lk)("div",k,[e.data?.icon?((0,t.uX)(),(0,t.CE)("i",{key:0,class:(0,n.C4)(e.data.icon)},null,2)):(0,t.Q3)("",!0),(0,t.Lk)("span",p,(0,n.v_)(e.data?.label),1),!1===e.data?.isActive?((0,t.uX)(),(0,t.CE)("span",L,"(ẩn)")):(0,t.Q3)("",!0)]),(0,t.Lk)("div",f,[(0,t.Lk)("span",{class:(0,n.C4)(["badge",{off:!1===e.data?.isActive}])},(0,n.v_)(!1===e.data?.isActive?"OFF":"ON"),3)])])])),_:1},8,["value","selectionKeys","onSelectionChange"]),g]),(0,t.Lk)("div",b,[s.selectedItem?((0,t.uX)(),(0,t.CE)("div",I,[(0,t.Lk)("div",y,[_,(0,t.Lk)("span",T,(0,n.v_)(s.selectedItem.id),1)]),(0,t.Lk)("div",A,[w,(0,t.Lk)("span",E,(0,n.v_)(s.selectedItem.label),1)]),(0,t.Lk)("div",R,[K,(0,t.Lk)("span",x,(0,n.v_)(s.selectedItem.icon||"(không có)"),1)]),(0,t.Lk)("div",F,[M,(0,t.Lk)("span",O,(0,n.v_)(s.selectedItem.to||"(không có)"),1)]),(0,t.Lk)("div",U,[V,(0,t.Lk)("span",X,[(0,t.Lk)("span",{class:(0,n.C4)(["badge",{off:!1===s.selectedItem.isActive}])},(0,n.v_)(!1===s.selectedItem.isActive?"ẨN":"HIỂN THỊ"),3)])]),(0,t.Lk)("div",D,[N,(0,t.Lk)("span",S,(0,n.v_)(s.getItemType(s.selectedItem)),1)]),(0,t.Lk)("div",q,[Q,(0,t.Lk)("span",W,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.getItemRoles(s.selectedItem.id),(e=>((0,t.uX)(),(0,t.CE)("span",{key:e,class:"role-badge"},(0,n.v_)(s.roleMap[e]),1)))),128))])])])):((0,t.uX)(),(0,t.CE)("div",C,"Chọn 1 menu để xem chi tiết."))])])])),_:1}),(0,t.bF)(se,{header:"Thống kê",style:{"margin-top":"20px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",j,[(0,t.Lk)("div",H,[z,(0,t.Lk)("div",J,(0,n.v_)(s.countMenuItems(s.currentData.admin||[])),1)]),(0,t.Lk)("div",P,[$,(0,t.Lk)("div",B,(0,n.v_)(s.countMenuItems(s.currentData.user||[])),1)]),(0,t.Lk)("div",G,[Y,(0,t.Lk)("div",Z,(0,n.v_)(s.countAllUniqueItems()),1)])])])),_:1})])}a(3725),a(5019),a(2598),a(1339),a(9229);var le=a(953),ae=a(3080),te=a(2178),ne=a(6036),se=a(1870),ie=a(7198),ce=a(7164);const de=[{label:"Tất cả (Admin + User)",value:"all"},{label:"Chỉ Admin",value:"admin"},{label:"Chỉ User",value:"user"}],ue={admin:"Admin",user:"User"},oe=e=>JSON.parse(JSON.stringify(e));var re={components:{Panel:te.A,Tree:ne.A,InputText:se.A,Dropdown:ie.A},setup(){(0,ae.d)();const e=(0,le.KR)("all");(0,t.sV)((()=>{(0,ce.wE)()}));const l=(0,le.EW)((()=>ce.K$.value)),a=(0,le.EW)((()=>{const a=l.value.admin||[],t=l.value.user||[];if("admin"===e.value)return a;if("user"===e.value)return t;const n={},s=(e,l)=>{for(const a of e)if(n[a.id]||(n[a.id]=oe(a)),a.children){n[a.id].children||(n[a.id].children=[]);for(const e of a.children)n[a.id].children.find((l=>l.id===e.id))||n[a.id].children.push(oe(e))}};return s(a,"admin"),s(t,"user"),Object.values(n)})),n=(0,le.KR)(""),s=(e,l)=>{const a=(l||"").trim().toLowerCase(),t=e=>!a||(e.label||"").toLowerCase().includes(a),n=e=>({key:e.id,data:e,expanded:!0,children:e.children?.length?e.children.map(n):void 0}),s=[];for(const i of e||[]){const e=(i.children||[]).some(t);if(!t(i)&&!e&&a)continue;const l=n(i);a&&l.children?.length&&(l.children=l.children.filter((e=>t(e.data)))),s.push(l)}return s},i=(0,le.EW)((()=>s(a.value,n.value))),c=(0,le.KR)({}),d=(0,le.KR)(null),u=()=>{c.value={},d.value=null},o=e=>{c.value=e.value||{};const l=Object.keys(c.value);d.value=l.length?l[0]:null},r=(e,l)=>{for(const a of l){if(a.id===e)return{item:a,parent:null};for(const l of a.children||[])if(l.id===e)return{item:l,parent:a}}return{item:null,parent:null}},v=(0,le.EW)((()=>d.value?r(d.value,a.value).item:null)),h=e=>{if(!e)return"-";const{parent:l}=r(e.id,a.value);return l?"Menu con":"Menu cha"},m=e=>{const a=[],t=l.value.admin||[],n=l.value.user||[];return r(e,t).item&&a.push("admin"),r(e,n).item&&a.push("user"),a},k=()=>{u(),n.value=""},p=e=>{let l=0;const a=e=>{for(const t of e)l++,t.children&&a(t.children)};return a(e),l},L=()=>p(a.value);return{searchText:n,selectedRole:e,roleOptions:de,roleMap:ue,treeNodes:i,selectionKeys:c,onSelectionChange:o,selectedItem:v,getItemType:h,getItemRoles:m,onRoleChange:k,currentData:l,countMenuItems:p,countAllUniqueItems:L}}},ve=a(6262);const he=(0,ve.A)(re,[["render",ee],["__scopeId","data-v-562f7a14"]]);var me=he}}]);
//# sourceMappingURL=943.0fd09ee0.js.map