{"version":3,"file":"js/922.ca062dfb.js","mappings":"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","sources":["webpack://zalo-fe/./src/pages/ManagerCategoryMenuPage.vue?b4f3","webpack://zalo-fe/./src/pages/ManagerCategoryMenuPage.vue","webpack://zalo-fe/./src/pages/ManagerCategoryMenuPage.vue?ecec"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, unref as _unref, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4136a66a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"menu-page\" }\nconst _hoisted_2 = { class: \"toolbar\" }\nconst _hoisted_3 = { class: \"actions\" }\nconst _hoisted_4 = { class: \"p-input-icon-left search\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"pi pi-search\" }, null, -1))\nconst _hoisted_6 = { class: \"list\" }\nconst _hoisted_7 = { class: \"parent-row\" }\nconst _hoisted_8 = { class: \"col-name\" }\nconst _hoisted_9 = { class: \"col-status\" }\nconst _hoisted_10 = { class: \"col-actions\" }\nconst _hoisted_11 = {\n  key: 0,\n  class: \"child-list\"\n}\nconst _hoisted_12 = { class: \"actions\" }\nconst _hoisted_13 = {\n  key: 1,\n  class: \"no-children\"\n}\nconst _hoisted_14 = { class: \"dialog-form\" }\nconst _hoisted_15 = { class: \"form-row\" }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, [\n  /*#__PURE__*/_createTextVNode(\"Tên hiển thị \"),\n  /*#__PURE__*/_createElementVNode(\"span\", { class: \"required\" }, \"*\")\n], -1))\nconst _hoisted_17 = { class: \"form-row\" }\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Icon (PrimeIcons)\", -1))\nconst _hoisted_19 = { class: \"form-row\" }\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Route (to)\", -1))\nconst _hoisted_21 = { class: \"form-row\" }\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Loại\", -1))\nconst _hoisted_23 = {\n  key: 0,\n  class: \"form-row\"\n}\nconst _hoisted_24 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, [\n  /*#__PURE__*/_createTextVNode(\"Menu cha \"),\n  /*#__PURE__*/_createElementVNode(\"span\", { class: \"required\" }, \"*\")\n], -1))\nconst _hoisted_25 = { class: \"form-row switch-row\" }\nconst _hoisted_26 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Hiển thị\", -1))\nconst _hoisted_27 = { class: \"form-actions\" }\n\nimport { computed, onMounted, reactive, ref } from \"vue\";\nimport { useToast } from \"primevue/usetoast\";\nimport { useConfirm } from \"primevue/useconfirm\";\nimport PageLayout from \"@/components/PageLayout.vue\";\n\nimport type { MenuItem } from \"@/config/menuStore\";\nimport { loadMenu, saveCurrent, menuData } from \"@/config/menuStore\";\n// Nếu menuStore của bạn có export sidebarMenuDefault thì bật import này để reset chuẩn:\n// import { sidebarMenuDefault } from \"@/config/menuStore\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  setup(__props) {\n\nconst toast = useToast();\nconst confirm = useConfirm();\n\nconst TYPE_OPTIONS = [\n  { label: \"Menu cha\", value: \"parent\" },\n  { label: \"Menu con\", value: \"child\" },\n];\n\nconst searchText = ref(\"\");\nconst dialogVisible = ref(false);\nconst isEdit = ref(false);\n\nconst form = reactive({\n  id: \"\",\n  label: \"\",\n  icon: \"\",\n  to: \"\",\n  type: \"parent\" as \"parent\" | \"child\",\n  parentId: null as string | null,\n  isActive: true,\n});\n\n/** =========================\n *  DATA SOURCE (single source of truth)\n *  ========================= */\nconst parents = computed<MenuItem[]>(() => menuData.value.admin || []);\n\nconst parentOptions = computed(() => parents.value.map((p) => ({ label: p.label, value: p.id })));\nconst hasParents = computed(() => parents.value.length > 0);\n\nconst filteredParents = computed(() => {\n  const q = (searchText.value || \"\").toLowerCase().trim();\n  if (!q) return parents.value;\n\n  return parents.value.filter(\n    (p) =>\n      (p.label || \"\").toLowerCase().includes(q) ||\n      (p.children || []).some((c) => (c.label || \"\").toLowerCase().includes(q))\n  );\n});\n\n/** =========================\n *  HELPERS\n *  ========================= */\nconst uid = (prefix: string) => `${prefix}_${Date.now()}_${Math.random().toString(16).slice(2)}`;\n\nfunction findParentByChildId(childId: string) {\n  return parents.value.find((p) => (p.children || []).some((c) => c.id === childId)) || null;\n}\n\nfunction findItem(id: string): { parent: MenuItem | null; item: MenuItem | null } {\n  const p = parents.value.find((x) => x.id === id);\n  if (p) return { parent: null, item: p };\n\n  for (const par of parents.value) {\n    const c = (par.children || []).find((x) => x.id === id);\n    if (c) return { parent: par, item: c };\n  }\n  return { parent: null, item: null };\n}\n\n/** =========================\n *  LOAD / SAVE\n *  ========================= */\nconst loadData = async () => {\n  try {\n    await loadMenu(); // GET /api/menu\n  } catch (e: any) {\n    toast.add({\n      severity: \"error\",\n      summary: \"Lỗi\",\n      detail: e?.message || \"Không thể tải menu từ server\",\n      life: 2500,\n    });\n  }\n};\n\nconst saveAllChanges = async () => {\n  try {\n    await saveCurrent(); // PUT /api/menu\n    toast.add({ severity: \"success\", summary: \"Lưu\", detail: \"Đã lưu vào menu.json\", life: 1200 });\n  } catch (e: any) {\n    toast.add({\n      severity: \"error\",\n      summary: \"Lỗi\",\n      detail: e?.message || \"Không thể lưu vào menu.json\",\n      life: 2500,\n    });\n  }\n};\n\n/** =========================\n *  DIALOG (ADD / EDIT)\n *  ========================= */\nconst openAdd = (type: \"parent\" | \"child\", parentId?: string) => {\n  isEdit.value = false;\n  form.id = \"\";\n  form.label = type === \"parent\" ? \"Menu cha mới\" : \"Menu con mới\";\n  form.icon = \"\";\n  form.to = \"\";\n  form.type = type;\n\n  if (type === \"child\") {\n    form.parentId = parentId || parentOptions.value[0]?.value || null;\n  } else {\n    form.parentId = null;\n  }\n\n  form.isActive = true;\n  dialogVisible.value = true;\n};\n\nconst openEdit = (item: MenuItem, parentId?: string) => {\n  isEdit.value = true;\n  form.id = item.id;\n  form.label = item.label || \"\";\n  form.icon = item.icon || \"\";\n  form.to = item.to || \"\";\n  form.type = parentId ? \"child\" : \"parent\";\n  form.parentId = parentId || null;\n  form.isActive = item.isActive !== false;\n  dialogVisible.value = true;\n};\n\nconst submitForm = async () => {\n  const lbl = (form.label || \"\").trim();\n  if (!lbl) {\n    toast.add({ severity: \"warn\", summary: \"Thiếu dữ liệu\", detail: \"Tên hiển thị không được để trống\", life: 1500 });\n    return;\n  }\n  if (form.type === \"child\" && !form.parentId) {\n    toast.add({ severity: \"warn\", summary: \"Thiếu dữ liệu\", detail: \"Menu con phải chọn menu cha\", life: 1500 });\n    return;\n  }\n\n  // ===== EDIT\n  if (isEdit.value) {\n    const hit = findItem(form.id);\n    if (!hit.item) {\n      toast.add({ severity: \"warn\", summary: \"Không tìm thấy\", detail: \"Không tìm thấy item để sửa\", life: 1500 });\n      return;\n    }\n\n    // nếu đang sửa child và đổi parent -> move child sang parent mới\n    if (form.type === \"child\" && form.parentId) {\n      const currentParent = findParentByChildId(form.id);\n      const nextParent = parents.value.find((p) => p.id === form.parentId) || null;\n\n      if (!nextParent) {\n        toast.add({ severity: \"warn\", summary: \"Thiếu dữ liệu\", detail: \"Menu cha không hợp lệ\", life: 1500 });\n        return;\n      }\n\n      // remove khỏi parent cũ (nếu có)\n      if (currentParent?.children) {\n        currentParent.children = currentParent.children.filter((c) => c.id !== form.id);\n      }\n\n      // add vào parent mới\n      if (!nextParent.children) nextParent.children = [];\n      nextParent.children.push({\n        id: form.id,\n        label: lbl,\n        icon: form.icon || \"\",\n        to: form.to || \"\",\n        isActive: form.isActive,\n      });\n    } else {\n      // sửa bình thường\n      Object.assign(hit.item, {\n        label: lbl,\n        icon: form.icon || \"\",\n        to: form.to || \"\",\n        isActive: form.isActive,\n      });\n    }\n  } else {\n    // ===== CREATE\n    if (form.type === \"parent\") {\n      parents.value.push({\n        id: uid(\"p\"),\n        label: lbl,\n        icon: form.icon || \"\",\n        to: form.to || \"\",\n        isActive: form.isActive,\n        children: [],\n      });\n    } else {\n      const p = parents.value.find((x) => x.id === form.parentId);\n      if (!p) {\n        toast.add({ severity: \"warn\", summary: \"Thiếu dữ liệu\", detail: \"Menu cha không hợp lệ\", life: 1500 });\n        return;\n      }\n      if (!p.children) p.children = [];\n      p.children.push({\n        id: uid(\"c\"),\n        label: lbl,\n        icon: form.icon || \"\",\n        to: form.to || \"\",\n        isActive: form.isActive,\n      });\n    }\n  }\n\n  dialogVisible.value = false;\n\n  // auto-save để reload không mất\n  await saveAllChanges();\n};\n\n/** =========================\n *  DELETE\n *  ========================= */\nconst confirmDelete = (id: string) => {\n  confirm.require({\n    header: \"Xác nhận xoá\",\n    icon: \"pi pi-exclamation-triangle\",\n    message: \"Bạn chắc chắn muốn xoá? Nếu là menu cha sẽ xoá luôn các menu con.\",\n    acceptLabel: \"Xoá\",\n    rejectLabel: \"Huỷ\",\n    accept: async () => {\n      doDelete(id);\n      await saveAllChanges();\n      toast.add({ severity: \"success\", summary: \"Thành công\", detail: \"Đã xóa menu\", life: 1200 });\n    },\n  });\n};\n\nconst doDelete = (id: string) => {\n  // xóa parent\n  const pIdx = parents.value.findIndex((p) => p.id === id);\n  if (pIdx >= 0) {\n    parents.value.splice(pIdx, 1);\n    return;\n  }\n\n  // xóa child\n  for (const p of parents.value) {\n    if (!p.children?.length) continue;\n    p.children = p.children.filter((c) => c.id !== id);\n  }\n};\n\n/** =========================\n *  RESET DEFAULT\n *  ========================= */\nconst confirmResetMenu = () => {\n  confirm.require({\n    header: \"Xác nhận khôi phục\",\n    icon: \"pi pi-refresh\",\n    message: \"Khôi phục menu về mặc định? Sẽ mất cấu hình đang chỉnh.\",\n    acceptLabel: \"Khôi phục\",\n    rejectLabel: \"Huỷ\",\n    accept: async () => {\n      try {\n        // Cách A (khuyên dùng): nếu menuStore export sidebarMenuDefault\n        // menuData.value = JSON.parse(JSON.stringify(sidebarMenuDefault));\n\n        // Cách B (an toàn nếu chưa có sidebarMenuDefault): chỉ reload lại từ server\n        // -> nếu bạn muốn reset về default thật sự, hãy làm endpoint reset ở server.\n        await loadData();\n\n        // nếu bạn dùng Cách A thì bật dòng này để ghi xuống file\n        // await saveAllChanges();\n\n        toast.add({ severity: \"success\", summary: \"Thành công\", detail: \"Đã khôi phục\", life: 1200 });\n      } catch (e: any) {\n        toast.add({ severity: \"error\", summary: \"Lỗi\", detail: e?.message || \"Không thể khôi phục\", life: 2500 });\n      }\n    },\n  });\n};\n\n/** =========================\n *  INIT\n *  ========================= */\nonMounted(async () => {\n  await loadData();\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_Button = _resolveComponent(\"Button\")!\n  const _component_InputText = _resolveComponent(\"InputText\")!\n  const _component_ConfirmDialog = _resolveComponent(\"ConfirmDialog\")!\n  const _component_Dropdown = _resolveComponent(\"Dropdown\")!\n  const _component_InputSwitch = _resolveComponent(\"InputSwitch\")!\n  const _component_Dialog = _resolveComponent(\"Dialog\")!\n\n  return (_openBlock(), _createBlock(PageLayout, { title: \"Quản lý danh mục menu\" }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_Button, {\n              class: \"btn-primary\",\n              icon: \"pi pi-plus\",\n              label: \"Thêm menu cha\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (openAdd('parent')))\n            }),\n            _createVNode(_component_Button, {\n              class: \"btn-primary\",\n              icon: \"pi pi-plus-circle\",\n              label: \"Thêm menu con\",\n              disabled: !_unref(hasParents),\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (openAdd('child')))\n            }, null, 8, [\"disabled\"]),\n            _createVNode(_component_Button, {\n              class: \"btn-outline\",\n              icon: \"pi pi-save\",\n              label: \"Lưu cấu hình\",\n              onClick: saveAllChanges\n            }),\n            _createVNode(_component_Button, {\n              class: \"btn-outline\",\n              icon: \"pi pi-refresh\",\n              label: \"Khôi phục mặc định\",\n              onClick: confirmResetMenu\n            })\n          ]),\n          _createElementVNode(\"span\", _hoisted_4, [\n            _hoisted_5,\n            _createVNode(_component_InputText, {\n              modelValue: searchText.value,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((searchText).value = $event)),\n              placeholder: \"Tìm menu...\"\n            }, null, 8, [\"modelValue\"])\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredParents), (p) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: p.id,\n              class: \"parent-item\"\n            }, [\n              _createElementVNode(\"div\", _hoisted_7, [\n                _createElementVNode(\"div\", _hoisted_8, [\n                  (p.icon)\n                    ? (_openBlock(), _createElementBlock(\"i\", {\n                        key: 0,\n                        class: _normalizeClass(p.icon)\n                      }, null, 2))\n                    : _createCommentVNode(\"\", true),\n                  _createElementVNode(\"strong\", null, _toDisplayString(p.label), 1)\n                ]),\n                _createElementVNode(\"div\", _hoisted_9, [\n                  _createElementVNode(\"span\", {\n                    class: _normalizeClass([\"badge\", { off: p.isActive === false }])\n                  }, _toDisplayString(p.isActive === false ? \"ẨN\" : \"HIỂN THỊ\"), 3)\n                ]),\n                _createElementVNode(\"div\", _hoisted_10, [\n                  _createVNode(_component_Button, {\n                    class: \"p-button-text p-button-sm\",\n                    label: \"Sửa\",\n                    onClick: ($event: any) => (openEdit(p))\n                  }, null, 8, [\"onClick\"]),\n                  _createVNode(_component_Button, {\n                    class: \"p-button-text p-button-sm\",\n                    label: \"Thêm con\",\n                    onClick: ($event: any) => (openAdd('child', p.id))\n                  }, null, 8, [\"onClick\"]),\n                  _createVNode(_component_Button, {\n                    class: \"p-button-text p-button-danger p-button-sm\",\n                    label: \"Xóa\",\n                    onClick: ($event: any) => (confirmDelete(p.id))\n                  }, null, 8, [\"onClick\"])\n                ])\n              ]),\n              (p.children && p.children.length)\n                ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_11, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(p.children, (c) => {\n                      return (_openBlock(), _createElementBlock(\"li\", {\n                        key: c.id\n                      }, [\n                        _createElementVNode(\"span\", null, [\n                          (c.icon)\n                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                key: 0,\n                                class: _normalizeClass(c.icon)\n                              }, null, 2))\n                            : _createCommentVNode(\"\", true),\n                          _createTextVNode(\" \" + _toDisplayString(c.label), 1)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_12, [\n                          _createVNode(_component_Button, {\n                            class: \"p-button-text p-button-sm\",\n                            icon: \"pi pi-pencil\",\n                            onClick: ($event: any) => (openEdit(c, p.id))\n                          }, null, 8, [\"onClick\"]),\n                          _createVNode(_component_Button, {\n                            class: \"p-button-text p-button-danger p-button-sm\",\n                            icon: \"pi pi-trash\",\n                            onClick: ($event: any) => (confirmDelete(c.id))\n                          }, null, 8, [\"onClick\"])\n                        ])\n                      ]))\n                    }), 128))\n                  ]))\n                : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, \"Chưa có menu con\"))\n            ]))\n          }), 128))\n        ]),\n        _createVNode(_component_ConfirmDialog),\n        _createVNode(_component_Dialog, {\n          header: \"Thêm / Chỉnh sửa menu\",\n          visible: dialogVisible.value,\n          \"onUpdate:visible\": _cache[10] || (_cache[10] = ($event: any) => ((dialogVisible).value = $event)),\n          modal: true,\n          style: { width: '500px' }\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_14, [\n              _createElementVNode(\"div\", _hoisted_15, [\n                _hoisted_16,\n                _createVNode(_component_InputText, {\n                  modelValue: _unref(form).label,\n                  \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(form).label) = $event))\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _createElementVNode(\"div\", _hoisted_17, [\n                _hoisted_18,\n                _createVNode(_component_InputText, {\n                  modelValue: _unref(form).icon,\n                  \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_unref(form).icon) = $event)),\n                  placeholder: \"vd: pi pi-home\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _createElementVNode(\"div\", _hoisted_19, [\n                _hoisted_20,\n                _createVNode(_component_InputText, {\n                  modelValue: _unref(form).to,\n                  \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_unref(form).to) = $event)),\n                  placeholder: \"vd: /sendmessage\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _createElementVNode(\"div\", _hoisted_21, [\n                _hoisted_22,\n                _createVNode(_component_Dropdown, {\n                  modelValue: _unref(form).type,\n                  \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_unref(form).type) = $event)),\n                  options: TYPE_OPTIONS,\n                  optionLabel: \"label\",\n                  optionValue: \"value\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              (_unref(form).type === 'child')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [\n                    _hoisted_24,\n                    _createVNode(_component_Dropdown, {\n                      modelValue: _unref(form).parentId,\n                      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_unref(form).parentId) = $event)),\n                      options: _unref(parentOptions),\n                      optionLabel: \"label\",\n                      optionValue: \"value\",\n                      placeholder: \"Chọn menu cha\"\n                    }, null, 8, [\"modelValue\", \"options\"])\n                  ]))\n                : _createCommentVNode(\"\", true),\n              _createElementVNode(\"div\", _hoisted_25, [\n                _hoisted_26,\n                _createVNode(_component_InputSwitch, {\n                  modelValue: _unref(form).isActive,\n                  \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_unref(form).isActive) = $event))\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _createElementVNode(\"div\", _hoisted_27, [\n                _createVNode(_component_Button, {\n                  class: \"btn-primary\",\n                  icon: \"pi pi-check\",\n                  label: \"Lưu\",\n                  onClick: submitForm\n                }),\n                _createVNode(_component_Button, {\n                  class: \"btn-outline\",\n                  icon: \"pi pi-times\",\n                  label: \"Huỷ\",\n                  onClick: _cache[9] || (_cache[9] = ($event: any) => (dialogVisible.value = false))\n                })\n              ])\n            ])\n          ]),\n          _: 1\n        }, 8, [\"visible\"])\n      ])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <PageLayout title=\"Quản lý danh mục menu\">\n    <div class=\"menu-page\">\n      <!-- ================= TOOLBAR ================= -->\n      <div class=\"toolbar\">\n        <div class=\"actions\">\n          <Button class=\"btn-primary\" icon=\"pi pi-plus\" label=\"Thêm menu cha\" @click=\"openAdd('parent')\" />\n          <Button class=\"btn-primary\" icon=\"pi pi-plus-circle\" label=\"Thêm menu con\" :disabled=\"!hasParents\"\n            @click=\"openAdd('child')\" />\n          <Button class=\"btn-outline\" icon=\"pi pi-save\" label=\"Lưu cấu hình\" @click=\"saveAllChanges\" />\n          <Button class=\"btn-outline\" icon=\"pi pi-refresh\" label=\"Khôi phục mặc định\" @click=\"confirmResetMenu\" />\n        </div>\n\n        <span class=\"p-input-icon-left search\">\n          <i class=\"pi pi-search\"></i>\n          <InputText v-model=\"searchText\" placeholder=\"Tìm menu...\" />\n        </span>\n      </div>\n\n      <!-- ================= LIST ================= -->\n      <div class=\"list\">\n        <div v-for=\"p in filteredParents\" :key=\"p.id\" class=\"parent-item\">\n          <div class=\"parent-row\">\n            <div class=\"col-name\">\n              <i v-if=\"p.icon\" :class=\"p.icon\"></i>\n              <strong>{{ p.label }}</strong>\n            </div>\n\n            <div class=\"col-status\">\n              <span class=\"badge\" :class=\"{ off: p.isActive === false }\">\n                {{ p.isActive === false ? \"ẨN\" : \"HIỂN THỊ\" }}\n              </span>\n            </div>\n\n            <div class=\"col-actions\">\n              <Button class=\"p-button-text p-button-sm\" label=\"Sửa\" @click=\"openEdit(p)\" />\n              <Button class=\"p-button-text p-button-sm\" label=\"Thêm con\" @click=\"openAdd('child', p.id)\" />\n              <Button class=\"p-button-text p-button-danger p-button-sm\" label=\"Xóa\" @click=\"confirmDelete(p.id)\" />\n            </div>\n          </div>\n\n          <ul class=\"child-list\" v-if=\"p.children && p.children.length\">\n            <li v-for=\"c in p.children\" :key=\"c.id\">\n              <span><i v-if=\"c.icon\" :class=\"c.icon\"></i> {{ c.label }}</span>\n\n              <div class=\"actions\">\n                <Button class=\"p-button-text p-button-sm\" icon=\"pi pi-pencil\" @click=\"openEdit(c, p.id)\" />\n                <Button class=\"p-button-text p-button-danger p-button-sm\" icon=\"pi pi-trash\"\n                  @click=\"confirmDelete(c.id)\" />\n              </div>\n            </li>\n          </ul>\n\n          <div v-else class=\"no-children\">Chưa có menu con</div>\n        </div>\n      </div>\n\n      <ConfirmDialog />\n\n      <!-- ================= DIALOG ADD/EDIT ================= -->\n      <Dialog header=\"Thêm / Chỉnh sửa menu\" v-model:visible=\"dialogVisible\" :modal=\"true\" :style=\"{ width: '500px' }\">\n        <div class=\"dialog-form\">\n          <div class=\"form-row\">\n            <label>Tên hiển thị <span class=\"required\">*</span></label>\n            <InputText v-model=\"form.label\" />\n          </div>\n\n          <div class=\"form-row\">\n            <label>Icon (PrimeIcons)</label>\n            <InputText v-model=\"form.icon\" placeholder=\"vd: pi pi-home\" />\n          </div>\n\n          <div class=\"form-row\">\n            <label>Route (to)</label>\n            <InputText v-model=\"form.to\" placeholder=\"vd: /sendmessage\" />\n          </div>\n\n          <div class=\"form-row\">\n            <label>Loại</label>\n            <Dropdown v-model=\"form.type\" :options=\"TYPE_OPTIONS\" optionLabel=\"label\" optionValue=\"value\" />\n          </div>\n\n          <div class=\"form-row\" v-if=\"form.type === 'child'\">\n            <label>Menu cha <span class=\"required\">*</span></label>\n            <Dropdown v-model=\"form.parentId\" :options=\"parentOptions\" optionLabel=\"label\" optionValue=\"value\"\n              placeholder=\"Chọn menu cha\" />\n          </div>\n\n          <div class=\"form-row switch-row\">\n            <label>Hiển thị</label>\n            <InputSwitch v-model=\"form.isActive\" />\n          </div>\n\n          <div class=\"form-actions\">\n            <Button class=\"btn-primary\" icon=\"pi pi-check\" label=\"Lưu\" @click=\"submitForm\" />\n            <Button class=\"btn-outline\" icon=\"pi pi-times\" label=\"Huỷ\" @click=\"dialogVisible = false\" />\n          </div>\n        </div>\n      </Dialog>\n    </div>\n  </PageLayout>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, onMounted, reactive, ref } from \"vue\";\nimport { useToast } from \"primevue/usetoast\";\nimport { useConfirm } from \"primevue/useconfirm\";\nimport PageLayout from \"@/components/PageLayout.vue\";\n\nimport type { MenuItem } from \"@/config/menuStore\";\nimport { loadMenu, saveCurrent, menuData } from \"@/config/menuStore\";\n// Nếu menuStore của bạn có export sidebarMenuDefault thì bật import này để reset chuẩn:\n// import { sidebarMenuDefault } from \"@/config/menuStore\";\n\nconst toast = useToast();\nconst confirm = useConfirm();\n\nconst TYPE_OPTIONS = [\n  { label: \"Menu cha\", value: \"parent\" },\n  { label: \"Menu con\", value: \"child\" },\n];\n\nconst searchText = ref(\"\");\nconst dialogVisible = ref(false);\nconst isEdit = ref(false);\n\nconst form = reactive({\n  id: \"\",\n  label: \"\",\n  icon: \"\",\n  to: \"\",\n  type: \"parent\" as \"parent\" | \"child\",\n  parentId: null as string | null,\n  isActive: true,\n});\n\n/** =========================\n *  DATA SOURCE (single source of truth)\n *  ========================= */\nconst parents = computed<MenuItem[]>(() => menuData.value.admin || []);\n\nconst parentOptions = computed(() => parents.value.map((p) => ({ label: p.label, value: p.id })));\nconst hasParents = computed(() => parents.value.length > 0);\n\nconst filteredParents = computed(() => {\n  const q = (searchText.value || \"\").toLowerCase().trim();\n  if (!q) return parents.value;\n\n  return parents.value.filter(\n    (p) =>\n      (p.label || \"\").toLowerCase().includes(q) ||\n      (p.children || []).some((c) => (c.label || \"\").toLowerCase().includes(q))\n  );\n});\n\n/** =========================\n *  HELPERS\n *  ========================= */\nconst uid = (prefix: string) => `${prefix}_${Date.now()}_${Math.random().toString(16).slice(2)}`;\n\nfunction findParentByChildId(childId: string) {\n  return parents.value.find((p) => (p.children || []).some((c) => c.id === childId)) || null;\n}\n\nfunction findItem(id: string): { parent: MenuItem | null; item: MenuItem | null } {\n  const p = parents.value.find((x) => x.id === id);\n  if (p) return { parent: null, item: p };\n\n  for (const par of parents.value) {\n    const c = (par.children || []).find((x) => x.id === id);\n    if (c) return { parent: par, item: c };\n  }\n  return { parent: null, item: null };\n}\n\n/** =========================\n *  LOAD / SAVE\n *  ========================= */\nconst loadData = async () => {\n  try {\n    await loadMenu(); // GET /api/menu\n  } catch (e: any) {\n    toast.add({\n      severity: \"error\",\n      summary: \"Lỗi\",\n      detail: e?.message || \"Không thể tải menu từ server\",\n      life: 2500,\n    });\n  }\n};\n\nconst saveAllChanges = async () => {\n  try {\n    await saveCurrent(); // PUT /api/menu\n    toast.add({ severity: \"success\", summary: \"Lưu\", detail: \"Đã lưu vào menu.json\", life: 1200 });\n  } catch (e: any) {\n    toast.add({\n      severity: \"error\",\n      summary: \"Lỗi\",\n      detail: e?.message || \"Không thể lưu vào menu.json\",\n      life: 2500,\n    });\n  }\n};\n\n/** =========================\n *  DIALOG (ADD / EDIT)\n *  ========================= */\nconst openAdd = (type: \"parent\" | \"child\", parentId?: string) => {\n  isEdit.value = false;\n  form.id = \"\";\n  form.label = type === \"parent\" ? \"Menu cha mới\" : \"Menu con mới\";\n  form.icon = \"\";\n  form.to = \"\";\n  form.type = type;\n\n  if (type === \"child\") {\n    form.parentId = parentId || parentOptions.value[0]?.value || null;\n  } else {\n    form.parentId = null;\n  }\n\n  form.isActive = true;\n  dialogVisible.value = true;\n};\n\nconst openEdit = (item: MenuItem, parentId?: string) => {\n  isEdit.value = true;\n  form.id = item.id;\n  form.label = item.label || \"\";\n  form.icon = item.icon || \"\";\n  form.to = item.to || \"\";\n  form.type = parentId ? \"child\" : \"parent\";\n  form.parentId = parentId || null;\n  form.isActive = item.isActive !== false;\n  dialogVisible.value = true;\n};\n\nconst submitForm = async () => {\n  const lbl = (form.label || \"\").trim();\n  if (!lbl) {\n    toast.add({ severity: \"warn\", summary: \"Thiếu dữ liệu\", detail: \"Tên hiển thị không được để trống\", life: 1500 });\n    return;\n  }\n  if (form.type === \"child\" && !form.parentId) {\n    toast.add({ severity: \"warn\", summary: \"Thiếu dữ liệu\", detail: \"Menu con phải chọn menu cha\", life: 1500 });\n    return;\n  }\n\n  // ===== EDIT\n  if (isEdit.value) {\n    const hit = findItem(form.id);\n    if (!hit.item) {\n      toast.add({ severity: \"warn\", summary: \"Không tìm thấy\", detail: \"Không tìm thấy item để sửa\", life: 1500 });\n      return;\n    }\n\n    // nếu đang sửa child và đổi parent -> move child sang parent mới\n    if (form.type === \"child\" && form.parentId) {\n      const currentParent = findParentByChildId(form.id);\n      const nextParent = parents.value.find((p) => p.id === form.parentId) || null;\n\n      if (!nextParent) {\n        toast.add({ severity: \"warn\", summary: \"Thiếu dữ liệu\", detail: \"Menu cha không hợp lệ\", life: 1500 });\n        return;\n      }\n\n      // remove khỏi parent cũ (nếu có)\n      if (currentParent?.children) {\n        currentParent.children = currentParent.children.filter((c) => c.id !== form.id);\n      }\n\n      // add vào parent mới\n      if (!nextParent.children) nextParent.children = [];\n      nextParent.children.push({\n        id: form.id,\n        label: lbl,\n        icon: form.icon || \"\",\n        to: form.to || \"\",\n        isActive: form.isActive,\n      });\n    } else {\n      // sửa bình thường\n      Object.assign(hit.item, {\n        label: lbl,\n        icon: form.icon || \"\",\n        to: form.to || \"\",\n        isActive: form.isActive,\n      });\n    }\n  } else {\n    // ===== CREATE\n    if (form.type === \"parent\") {\n      parents.value.push({\n        id: uid(\"p\"),\n        label: lbl,\n        icon: form.icon || \"\",\n        to: form.to || \"\",\n        isActive: form.isActive,\n        children: [],\n      });\n    } else {\n      const p = parents.value.find((x) => x.id === form.parentId);\n      if (!p) {\n        toast.add({ severity: \"warn\", summary: \"Thiếu dữ liệu\", detail: \"Menu cha không hợp lệ\", life: 1500 });\n        return;\n      }\n      if (!p.children) p.children = [];\n      p.children.push({\n        id: uid(\"c\"),\n        label: lbl,\n        icon: form.icon || \"\",\n        to: form.to || \"\",\n        isActive: form.isActive,\n      });\n    }\n  }\n\n  dialogVisible.value = false;\n\n  // auto-save để reload không mất\n  await saveAllChanges();\n};\n\n/** =========================\n *  DELETE\n *  ========================= */\nconst confirmDelete = (id: string) => {\n  confirm.require({\n    header: \"Xác nhận xoá\",\n    icon: \"pi pi-exclamation-triangle\",\n    message: \"Bạn chắc chắn muốn xoá? Nếu là menu cha sẽ xoá luôn các menu con.\",\n    acceptLabel: \"Xoá\",\n    rejectLabel: \"Huỷ\",\n    accept: async () => {\n      doDelete(id);\n      await saveAllChanges();\n      toast.add({ severity: \"success\", summary: \"Thành công\", detail: \"Đã xóa menu\", life: 1200 });\n    },\n  });\n};\n\nconst doDelete = (id: string) => {\n  // xóa parent\n  const pIdx = parents.value.findIndex((p) => p.id === id);\n  if (pIdx >= 0) {\n    parents.value.splice(pIdx, 1);\n    return;\n  }\n\n  // xóa child\n  for (const p of parents.value) {\n    if (!p.children?.length) continue;\n    p.children = p.children.filter((c) => c.id !== id);\n  }\n};\n\n/** =========================\n *  RESET DEFAULT\n *  ========================= */\nconst confirmResetMenu = () => {\n  confirm.require({\n    header: \"Xác nhận khôi phục\",\n    icon: \"pi pi-refresh\",\n    message: \"Khôi phục menu về mặc định? Sẽ mất cấu hình đang chỉnh.\",\n    acceptLabel: \"Khôi phục\",\n    rejectLabel: \"Huỷ\",\n    accept: async () => {\n      try {\n        // Cách A (khuyên dùng): nếu menuStore export sidebarMenuDefault\n        // menuData.value = JSON.parse(JSON.stringify(sidebarMenuDefault));\n\n        // Cách B (an toàn nếu chưa có sidebarMenuDefault): chỉ reload lại từ server\n        // -> nếu bạn muốn reset về default thật sự, hãy làm endpoint reset ở server.\n        await loadData();\n\n        // nếu bạn dùng Cách A thì bật dòng này để ghi xuống file\n        // await saveAllChanges();\n\n        toast.add({ severity: \"success\", summary: \"Thành công\", detail: \"Đã khôi phục\", life: 1200 });\n      } catch (e: any) {\n        toast.add({ severity: \"error\", summary: \"Lỗi\", detail: e?.message || \"Không thể khôi phục\", life: 2500 });\n      }\n    },\n  });\n};\n\n/** =========================\n *  INIT\n *  ========================= */\nonMounted(async () => {\n  await loadData();\n});\n</script>\n\n<style scoped lang=\"scss\">\n.menu-page {\n  padding: 16px;\n}\n\n.toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 20px;\n  flex-wrap: wrap;\n}\n\n.actions {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.search {\n  width: 300px;\n}\n\n.list {\n  display: grid;\n  gap: 12px;\n}\n\n.parent-item {\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 12px;\n  background: #fff;\n}\n\n.parent-row {\n  display: grid;\n  grid-template-columns: 1fr 100px 180px;\n  gap: 12px;\n  align-items: center;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #f3f4f6;\n}\n\n.col-name {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  min-width: 0;\n}\n\n.col-status {\n  text-align: center;\n}\n\n.col-actions {\n  display: flex;\n  gap: 6px;\n  justify-content: flex-end;\n}\n\n.badge {\n  display: inline-block;\n  padding: 4px 8px;\n  border-radius: 999px;\n  border: 1px solid #e5e7eb;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.badge.off {\n  opacity: 0.6;\n}\n\n.child-list {\n  list-style: none;\n  padding: 0;\n  margin: 12px 0 0 0;\n  display: grid;\n  gap: 8px;\n}\n\n.child-list li {\n  display: grid;\n  grid-template-columns: 1fr auto;\n  gap: 8px;\n  align-items: center;\n  padding: 8px;\n  background: #f9fafb;\n  border-radius: 4px;\n  border-left: 3px solid #3b82f6;\n}\n\n.child-list .actions {\n  display: flex;\n  gap: 4px;\n}\n\n.no-children {\n  padding: 12px 8px;\n  color: #9ca3af;\n  font-size: 13px;\n}\n\n.dialog-form {\n  display: grid;\n  gap: 16px;\n}\n\n.form-row {\n  display: grid;\n  gap: 6px;\n}\n\n.form-row label {\n  font-size: 13px;\n  font-weight: 500;\n  color: #374151;\n}\n\n.required {\n  color: #ef4444;\n}\n\n.switch-row {\n  display: grid;\n  grid-template-columns: 1fr auto;\n  gap: 12px;\n  align-items: center;\n}\n\n.form-actions {\n  display: flex;\n  gap: 8px;\n  justify-content: flex-end;\n  margin-top: 8px;\n}\n\n.btn-primary {\n  background: #3b82f6 !important;\n  border-color: #3b82f6 !important;\n  color: #fff !important;\n\n  &:hover {\n    background: #2563eb !important;\n    border-color: #2563eb !important;\n  }\n}\n\n.btn-outline {\n  background: #fff !important;\n  border-color: #d1d5db !important;\n  color: #374151 !important;\n\n  &:hover {\n    border-color: #9ca3af !important;\n  }\n}\n\n:deep(.p-button-sm) {\n  padding: 0.5rem 0.75rem !important;\n  font-size: 12px !important;\n}\n</style>\n","import script from \"./ManagerCategoryMenuPage.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ManagerCategoryMenuPage.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./ManagerCategoryMenuPage.vue?vue&type=style&index=0&id=4136a66a&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4136a66a\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementVNode","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","key","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_createTextVNode","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_defineComponent","setup","__props","toast","useToast","confirm","useConfirm","TYPE_OPTIONS","label","value","searchText","ref","dialogVisible","isEdit","form","reactive","id","icon","to","type","parentId","isActive","parents","computed","menuData","admin","parentOptions","map","p","hasParents","length","filteredParents","q","toLowerCase","trim","filter","includes","children","some","c","uid","prefix","Date","now","Math","random","toString","slice","findParentByChildId","childId","find","findItem","x","parent","item","par","loadData","async","loadMenu","e","add","severity","summary","detail","message","life","saveAllChanges","saveCurrent","openAdd","openEdit","submitForm","lbl","hit","currentParent","nextParent","push","Object","assign","confirmDelete","require","header","acceptLabel","rejectLabel","accept","doDelete","pIdx","findIndex","splice","confirmResetMenu","onMounted","_ctx","_cache","_component_Button","_resolveComponent","_component_InputText","_component_ConfirmDialog","_component_Dropdown","_component_InputSwitch","_component_Dialog","_openBlock","_createBlock","PageLayout","title","default","_withCtx","_createVNode","onClick","$event","disabled","_unref","modelValue","placeholder","_createElementBlock","_Fragment","_renderList","_normalizeClass","_createCommentVNode","_toDisplayString","off","visible","modal","style","width","options","optionLabel","optionValue","_","__exports__"],"sourceRoot":""}