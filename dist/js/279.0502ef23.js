"use strict";(self["webpackChunkzalo_fe"]=self["webpackChunkzalo_fe"]||[]).push([[279],{9279:function(e,l,t){t.r(l),t.d(l,{default:function(){return Zl}});t(3725),t(5019);var a=t(641),n=t(953),i=t(3543),s=t(33);const o=e=>((0,a.Qi)("data-v-1ccd9dfc"),e=e(),(0,a.jt)(),e),u={class:"dashboard"},r={class:"cards"},d={class:"label"},c={class:"value"},p={class:"lists"},v={class:"panel"},b=o((()=>(0,a.Lk)("h4",null,"Overdue - Pending Approval",-1))),m={class:"panel"},k=o((()=>(0,a.Lk)("h4",null,"Overdue - In Progress",-1)));var h=(0,a.pM)({setup(e){const l=(0,i.Pj)(),t=(0,n.EW)((()=>{const e=l.getters["support/counts"];return{Total:e.total,Pending:e.waiting,"In Progress":e.inProgress,Done:e.done}})),o=(0,n.EW)((()=>l.state.support.tickets.filter((e=>e.status.startsWith("PENDING")&&new Date(e.dueAt)<new Date)))),h=(0,n.EW)((()=>l.state.support.tickets.filter((e=>("IN_PROGRESS"===e.status||"APPROVED"===e.status)&&new Date(e.dueAt)<new Date))));function E(e){const l={DRAFT:"Draft",SUBMITTED:"Submitted",PENDING_DEPT:"Pending",PENDING_LEADER:"Pending",PENDING_BOD:"Pending",NEED_MORE_INFO:"Need more info",REJECTED:"Rejected",APPROVED:"Approved",IN_PROGRESS:"In Progress",WAITING_REQUESTER:"Waiting Requester",RESOLVED:"Resolved",CLOSED:"Closed",REOPENED:"Reopened"};return e?l[e.status]||e.status:""}return(e,l)=>((0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("div",r,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(t),((e,l)=>((0,a.uX)(),(0,a.CE)("div",{class:"card",key:l},[(0,a.Lk)("div",d,(0,s.v_)(l),1),(0,a.Lk)("div",c,(0,s.v_)(e),1)])))),128))]),(0,a.Lk)("div",p,[(0,a.Lk)("div",v,[b,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(o),(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},(0,s.v_)(e.code)+" - "+(0,s.v_)(e.title)+" ("+(0,s.v_)(E(e))+") ",1)))),128))])]),(0,a.Lk)("div",m,[k,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(h),(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},(0,s.v_)(e.code)+" - "+(0,s.v_)(e.title)+" ("+(0,s.v_)(E(e))+") ",1)))),128))])])])]))}}),E=t(6262);const R=(0,E.A)(h,[["__scopeId","data-v-1ccd9dfc"]]);var f=R,L=t(3858),g=t(900),C=t(7198),y=t(1870),A=t(5348);const _={class:"filters"};var D=(0,a.pM)({setup(e){const l=(0,i.Pj)(),t=(0,n.EW)((()=>l.state.support.tickets||[])),s=(0,n.EW)((()=>l.state.support.loading)),o=(0,n.KR)([]),u=(0,n.KR)({status:"ALL",severity:"ALL",keyword:""}),r=[{label:"All",value:"ALL"},{label:"Submitted",value:"SUBMITTED"},{label:"Pending (Dept)",value:"PENDING_DEPT"},{label:"Pending (Leader)",value:"PENDING_LEADER"},{label:"Approved",value:"APPROVED"}],d=[{label:"All",value:"ALL"},{label:"Low",value:"LOW"},{label:"Medium",value:"MEDIUM"},{label:"High",value:"HIGH"},{label:"Special",value:"SPECIAL"}];function c(){l.commit("support/setFilter",u.value),l.dispatch("support/fetchTickets")}function p(){l.dispatch("support/exportCsv",u.value).then((e=>{const l=new Blob([e],{type:"text/csv"}),t=URL.createObjectURL(l),a=document.createElement("a");a.href=t,a.download="tickets.csv",a.click(),URL.revokeObjectURL(t)}))}function v(e){const l={LOW:"Thấp",MEDIUM:"Trung bình",HIGH:"Cao",SPECIAL:"Đặc biệt"};return l[e.severity]||e.severity}function b(e){const l={DRAFT:"Draft",SUBMITTED:"Submitted",PENDING_DEPT:"Pending",PENDING_LEADER:"Pending",PENDING_BOD:"Pending",NEED_MORE_INFO:"Need more info",REJECTED:"Rejected",APPROVED:"Approved",IN_PROGRESS:"In Progress",WAITING_REQUESTER:"Waiting Requester",RESOLVED:"Resolved",CLOSED:"Closed",REOPENED:"Reopened"};return l[e.status]||e.status}function m(e){return{}}return(e,l)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",_,[(0,a.bF)((0,n.R1)(C.A),{options:r,modelValue:u.value.status,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value.status=e),placeholder:"Status",onChange:c},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(C.A),{options:d,modelValue:u.value.severity,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value.severity=e),placeholder:"Severity",onChange:c},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(y.A),{modelValue:u.value.keyword,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value.keyword=e),placeholder:"Search...",onInput:c},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(A.A),{label:"Export CSV",icon:"pi pi-file",class:"p-button-secondary",onClick:p})]),(0,a.bF)((0,n.R1)(L.A),{value:(0,n.R1)(t),selectionMode:"multiple",selection:o.value,"onUpdate:selection":l[3]||(l[3]=e=>o.value=e),paginator:!0,rows:10,loading:(0,n.R1)(s)},{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(g.A),{selectionMode:"multiple",style:{width:"3rem"}}),(0,a.bF)((0,n.R1)(g.A),{field:"code",header:"Code"}),(0,a.bF)((0,n.R1)(g.A),{field:"title",header:"Title"}),(0,a.bF)((0,n.R1)(g.A),{header:"Severity",body:v}),(0,a.bF)((0,n.R1)(g.A),{header:"Status",body:b}),(0,a.bF)((0,n.R1)(g.A),{field:"department",header:"Department"}),(0,a.bF)((0,n.R1)(g.A),{field:"createdAt",header:"Created At",body:"formatDate"}),(0,a.bF)((0,n.R1)(g.A),{header:"Actions",body:m})])),_:1},8,["value","selection","loading"])]))}});const I=(0,E.A)(D,[["__scopeId","data-v-8f6577e6"]]);var P=I,F=t(7129),S=t(8372),w=t(148);const T=e=>((0,a.Qi)("data-v-1f9f43fd"),e=e(),(0,a.jt)(),e),x=(0,a.eW)("Request: "),N=T((()=>(0,a.Lk)("label",null,"Reason / Message (required when rejecting/requesting)",-1))),V={class:"actions"};var O=(0,a.pM)({setup(e){const l=(0,i.Pj)(),t=(0,n.KR)(!1),o=(0,n.KR)(null),u=(0,n.KR)("APPROVE"),r=(0,n.KR)(""),d=(0,n.EW)((()=>l.state.support.tickets.filter((e=>"PENDING_DEPT"===e.status)))),c=(0,n.EW)((()=>l.state.support.tickets.filter((e=>"PENDING_LEADER"===e.status)))),p=(0,n.EW)((()=>l.state.support.tickets.filter((e=>"PENDING_BOD"===e.status))));function v(e,l){o.value=e,u.value=l,t.value=!0}function b(e){const l={DRAFT:"Draft",SUBMITTED:"Submitted",PENDING_DEPT:"Pending",PENDING_LEADER:"Pending",PENDING_BOD:"Pending",NEED_MORE_INFO:"Need more info",REJECTED:"Rejected",APPROVED:"Approved",IN_PROGRESS:"In Progress",WAITING_REQUESTER:"Waiting Requester",RESOLVED:"Resolved",CLOSED:"Closed",REOPENED:"Reopened"};return e?l[e.status]||e.status:""}function m(){("REJECT"!==u.value&&"REQUEST_MORE_INFO"!==u.value||r.value)&&l.dispatch("support/approveTicket",{id:o.value.id,actor:"approver",action:u.value,reason:r.value}).then((()=>{t.value=!1,r.value="",l.dispatch("support/fetchTickets")}))}return(e,l)=>{const i=(0,a.g2)("Textarea");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)((0,n.R1)(F.A),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(S.A),{header:"Pending - Dept"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(d),(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.eW)((0,s.v_)(e.code)+" - "+(0,s.v_)(e.title)+" ("+(0,s.v_)(b(e))+") ",1),(0,a.bF)((0,n.R1)(A.A),{title:"Approve",icon:"pi pi-check",class:"p-button-text",onClick:l=>v(e,"APPROVE")},null,8,["onClick"]),(0,a.bF)((0,n.R1)(A.A),{title:"Reject",icon:"pi pi-times",class:"p-button-text p-button-danger",onClick:l=>v(e,"REJECT")},null,8,["onClick"]),(0,a.bF)((0,n.R1)(A.A),{title:"Request more info",icon:"pi pi-comment",class:"p-button-text",onClick:l=>v(e,"REQUEST_MORE_INFO")},null,8,["onClick"])])))),128))])])),_:1}),(0,a.bF)((0,n.R1)(S.A),{header:"Pending - Leader"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(c),(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.eW)((0,s.v_)(e.code)+" - "+(0,s.v_)(e.title)+" ("+(0,s.v_)(b(e))+") ",1),(0,a.bF)((0,n.R1)(A.A),{title:"Approve",icon:"pi pi-check",class:"p-button-text",onClick:l=>v(e,"APPROVE")},null,8,["onClick"]),(0,a.bF)((0,n.R1)(A.A),{title:"Reject",icon:"pi pi-times",class:"p-button-text p-button-danger",onClick:l=>v(e,"REJECT")},null,8,["onClick"]),(0,a.bF)((0,n.R1)(A.A),{title:"Request more info",icon:"pi pi-comment",class:"p-button-text",onClick:l=>v(e,"REQUEST_MORE_INFO")},null,8,["onClick"])])))),128))])])),_:1}),(0,a.bF)((0,n.R1)(S.A),{header:"Pending - BOD"},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(p),(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.eW)((0,s.v_)(e.code)+" - "+(0,s.v_)(e.title)+" ("+(0,s.v_)(b(e))+") ",1),(0,a.bF)((0,n.R1)(A.A),{title:"Approve",icon:"pi pi-check",class:"p-button-text",onClick:l=>v(e,"APPROVE")},null,8,["onClick"]),(0,a.bF)((0,n.R1)(A.A),{title:"Reject",icon:"pi pi-times",class:"p-button-text p-button-danger",onClick:l=>v(e,"REJECT")},null,8,["onClick"]),(0,a.bF)((0,n.R1)(A.A),{title:"Request more info",icon:"pi pi-comment",class:"p-button-text",onClick:l=>v(e,"REQUEST_MORE_INFO")},null,8,["onClick"])])))),128))])])),_:1})])),_:1}),(0,a.bF)((0,n.R1)(w.A),{header:"Approve / Reject / Request More Info",visible:t.value,"onUpdate:visible":l[1]||(l[1]=e=>t.value=e)},{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[(0,a.Lk)("p",null,[x,(0,a.Lk)("b",null,(0,s.v_)(o.value?.code),1),(0,a.eW)(" - "+(0,s.v_)(o.value?.title),1)]),N,(0,a.bF)(i,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),rows:"3"},null,8,["modelValue"]),(0,a.Lk)("div",V,[(0,a.bF)((0,n.R1)(A.A),{label:"Confirm",icon:"pi pi-check",onClick:m})])])])),_:1},8,["visible"])])}}});const M=(0,E.A)(O,[["__scopeId","data-v-1f9f43fd"]]);var X=M;const U=e=>((0,a.Qi)("data-v-79058d08"),e=e(),(0,a.jt)(),e),W=U((()=>(0,a.Lk)("h3",null,"Reports",-1))),G={class:"filters"},K=U((()=>(0,a.Lk)("label",null,"From",-1))),B=U((()=>(0,a.Lk)("label",null,"To",-1))),Q={class:"cards"};var j=(0,a.pM)({setup(e){const l=(0,i.Pj)(),t=(0,n.KR)(""),o=(0,n.KR)(""),u=(0,n.Kh)({total:0,avgApproval:0});function r(){l.dispatch("support/fetchTickets").then((()=>{const e=l.state.support.tickets;u.total=e.length,u.avgApproval=Math.round(48*Math.random()*100)/100}))}function d(){l.dispatch("support/exportCsv",{dateFrom:t.value,dateTo:o.value}).then((e=>{const l=new Blob([e],{type:"text/csv"}),t=URL.createObjectURL(l),a=document.createElement("a");a.href=t,a.download="report.csv",a.click(),URL.revokeObjectURL(t)}))}return(e,l)=>((0,a.uX)(),(0,a.CE)("div",null,[W,(0,a.Lk)("div",G,[K,(0,a.bF)((0,n.R1)(y.A),{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),placeholder:"YYYY-MM-DD"},null,8,["modelValue"]),B,(0,a.bF)((0,n.R1)(y.A),{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),placeholder:"YYYY-MM-DD"},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(A.A),{label:"Run",onClick:r}),(0,a.bF)((0,n.R1)(A.A),{label:"Export CSV",class:"p-button-secondary",onClick:d})]),(0,a.Lk)("div",Q,[(0,a.Lk)("div",null,"Total: "+(0,s.v_)((0,n.R1)(u).total),1),(0,a.Lk)("div",null,"Avg approval time (mock): "+(0,s.v_)((0,n.R1)(u).avgApproval)+"h",1)])]))}});const $=(0,E.A)(j,[["__scopeId","data-v-79058d08"]]);var q=$;const H=(0,a.Lk)("h3",null,"Settings (Admin)",-1),Y=(0,a.Lk)("p",null,"Manage categories and SLA (mock)",-1),J=(0,a.Lk)("label",null,"Categories",-1);var z=(0,a.pM)({setup(e){const l=(0,n.KR)(["Access","Equipment","IT Support"]),t=(0,n.KR)("");function i(){t.value&&(l.value.push(t.value),t.value="")}return(e,o)=>((0,a.uX)(),(0,a.CE)("div",null,[H,Y,(0,a.Lk)("div",null,[J,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.value,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e},(0,s.v_)(e),1)))),128))]),(0,a.bF)((0,n.R1)(y.A),{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e),placeholder:"New category name"},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(A.A),{label:"Add",onClick:i})])]))}});const Z=z;var ee=Z;const le=e=>((0,a.Qi)("data-v-4e7fa528"),e=e(),(0,a.jt)(),e),te={class:"form"},ae={class:"p-fluid"},ne=le((()=>(0,a.Lk)("label",null,"Title",-1))),ie={key:0,class:"p-error"},se=le((()=>(0,a.Lk)("label",null,"Description",-1))),oe=le((()=>(0,a.Lk)("label",null,"Category",-1))),ue=le((()=>(0,a.Lk)("label",null,"Department",-1))),re=le((()=>(0,a.Lk)("label",null,"Severity",-1))),de={key:1,class:"p-error"},ce=le((()=>(0,a.Lk)("label",null,"Attachments (mock)",-1))),pe={key:2},ve={key:4,class:"p-error"},be={class:"actions"};var me=(0,a.pM)({props:{visible:null},emits:["update:visible","created"],setup(e,{emit:l}){const t=e,o=(0,i.Pj)(),u=(0,n.KR)(t.visible);(0,a.wB)((()=>t.visible),(e=>u.value=e)),(0,a.wB)(u,(e=>l("update:visible",e)));const r=(0,n.KR)({title:"",description:"",category:"",department:"",severity:"LOW",attachments:[]}),d=(0,n.KR)(""),c=(0,n.KR)(""),p=(0,n.KR)({}),v=[{label:"Access",value:"Access"},{label:"Equipment",value:"Equipment"},{label:"IT Support",value:"IT Support"}],b=[{label:"Low",value:"LOW"},{label:"Medium",value:"MEDIUM"},{label:"High",value:"HIGH"},{label:"Special",value:"SPECIAL"}],m=(0,n.EW)((()=>"HIGH"===r.value.severity||"SPECIAL"===r.value.severity));function k(){return p.value={},r.value.title||(p.value.title="Title is required"),r.value.severity||(p.value.severity="Select severity"),m.value&&!c.value&&(p.value.reason="Reason required for HIGH/SPECIAL"),0===Object.keys(p.value).length}function h(){o.dispatch("support/createTicket",{...r.value,createdBy:"web_user"}).then((()=>{l("created"),u.value=!1}))}function E(){k()&&o.dispatch("support/createTicket",{...r.value,createdBy:"web_user"}).then((e=>{o.dispatch("support/submitTicket",{id:e.id,actor:"web_user"}).then((()=>{l("created"),u.value=!1}))}))}function R(){d.value&&(r.value.attachments.push({id:"a-"+Math.random().toString(36).slice(2,8),filename:d.value}),d.value="")}return(e,l)=>{const t=(0,a.g2)("Textarea");return(0,a.uX)(),(0,a.Wv)((0,n.R1)(w.A),{header:"Create Request",visible:u.value,"onUpdate:visible":l[7]||(l[7]=e=>u.value=e),modal:!0,closable:!0},{default:(0,a.k6)((()=>[(0,a.Lk)("div",te,[(0,a.Lk)("div",ae,[ne,(0,a.bF)((0,n.R1)(y.A),{modelValue:r.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value.title=e)},null,8,["modelValue"]),p.value.title?((0,a.uX)(),(0,a.CE)("small",ie,(0,s.v_)(p.value.title),1)):(0,a.Q3)("",!0),se,(0,a.bF)(t,{modelValue:r.value.description,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value.description=e),rows:"4"},null,8,["modelValue"]),oe,(0,a.bF)((0,n.R1)(C.A),{options:v,modelValue:r.value.category,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value.category=e),optionLabel:"label",optionValue:"value"},null,8,["modelValue"]),ue,(0,a.bF)((0,n.R1)(y.A),{modelValue:r.value.department,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value.department=e)},null,8,["modelValue"]),re,(0,a.bF)((0,n.R1)(C.A),{options:b,modelValue:r.value.severity,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value.severity=e)},null,8,["modelValue"]),p.value.severity?((0,a.uX)(),(0,a.CE)("small",de,(0,s.v_)(p.value.severity),1)):(0,a.Q3)("",!0),ce,(0,a.bF)((0,n.R1)(y.A),{modelValue:d.value,"onUpdate:modelValue":l[5]||(l[5]=e=>d.value=e),placeholder:"Enter file name and click Upload"},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(A.A),{label:"Upload",class:"p-button-secondary",onClick:R}),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.value.attachments,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},(0,s.v_)(e.filename),1)))),128))]),(0,n.R1)(m)?((0,a.uX)(),(0,a.CE)("label",pe,"Reason (required for HIGH/SPECIAL)")):(0,a.Q3)("",!0),(0,n.R1)(m)?((0,a.uX)(),(0,a.Wv)(t,{key:3,modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=e=>c.value=e),rows:"2"},null,8,["modelValue"])):(0,a.Q3)("",!0),p.value.reason?((0,a.uX)(),(0,a.CE)("small",ve,(0,s.v_)(p.value.reason),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",be,[(0,a.bF)((0,n.R1)(A.A),{label:"Save Draft",icon:"pi pi-save",class:"p-button-text",onClick:h}),(0,a.bF)((0,n.R1)(A.A),{label:"Submit",icon:"pi pi-send",class:"p-button-primary",onClick:E})])])])),_:1},8,["visible"])}}});const ke=(0,E.A)(me,[["__scopeId","data-v-4e7fa528"]]);var he=ke,Ee={name:"Tag",props:{value:null,severity:null,rounded:Boolean,icon:String},computed:{containerClass(){return["p-tag p-component",{"p-tag-info":"info"===this.severity,"p-tag-success":"success"===this.severity,"p-tag-warning":"warning"===this.severity,"p-tag-danger":"danger"===this.severity,"p-tag-rounded":this.rounded}]},iconClass(){return["p-tag-icon",this.icon]}}};const Re={class:"p-tag-value"};function fe(e,l,t,n,i,o){return(0,a.uX)(),(0,a.CE)("span",(0,a.v6)({class:o.containerClass},e.$attrs),[t.icon?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,s.C4)(o.iconClass)},null,2)):(0,a.Q3)("",!0),(0,a.RG)(e.$slots,"default",{},(()=>[(0,a.Lk)("span",Re,(0,s.v_)(t.value),1)]))],16)}function Le(e,l){void 0===l&&(l={});var t=l.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var ge="\n.p-tag {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-tag-icon,\n.p-tag-value,\n.p-tag-icon.pi {\n    line-height: 1.5;\n}\n.p-tag.p-tag-rounded {\n    border-radius: 10rem;\n}\n";Le(ge),Ee.render=fe;const Ce=e=>((0,a.Qi)("data-v-30c6e291"),e=e(),(0,a.jt)(),e),ye={key:0},Ae={class:"header-row"},_e={class:"left"},De={class:"right"},Ie={class:"panels"},Pe={class:"panel"},Fe=Ce((()=>(0,a.Lk)("h4",null,"General Information",-1))),Se=Ce((()=>(0,a.Lk)("b",null,"Department:",-1))),we=Ce((()=>(0,a.Lk)("b",null,"Location:",-1))),Te=Ce((()=>(0,a.Lk)("b",null,"Contact:",-1))),xe={class:"panel"},Ne=Ce((()=>(0,a.Lk)("h4",null,"History",-1))),Ve=Ce((()=>(0,a.Lk)("h4",null,"Discussion",-1))),Oe={class:"actions"},Me={key:1},Xe={key:1,class:"ticket-detail-inline"},Ue={key:0},We={class:"header-row"},Ge={class:"left"},Ke={class:"right"},Be={class:"panels"},Qe={class:"panel"},je=Ce((()=>(0,a.Lk)("h4",null,"General Information",-1))),$e=Ce((()=>(0,a.Lk)("b",null,"Department:",-1))),qe=Ce((()=>(0,a.Lk)("b",null,"Location:",-1))),He=Ce((()=>(0,a.Lk)("b",null,"Contact:",-1))),Ye={class:"panel"},Je=Ce((()=>(0,a.Lk)("h4",null,"History",-1))),ze=Ce((()=>(0,a.Lk)("h4",null,"Discussion",-1))),Ze={class:"actions"},el={key:1};var ll=(0,a.pM)({props:{id:null,inline:null},emits:["close"],setup(e,{emit:l}){const t=e,o=!0===t.inline,u=(0,n.KR)(!0),r=(0,i.Pj)(),d=(0,n.KR)(null),c=(0,n.KR)(!1),p=(0,n.KR)("");async function v(e){e&&(c.value=!0,d.value=await r.dispatch("support/getTicket",e),c.value=!1)}(0,a.wB)((()=>t.id),(e=>{e?(v(e),o||(u.value=!0)):(d.value=null,o||(u.value=!1))}));const b=(0,n.EW)((()=>d.value?`${d.value.code} - ${d.value.title}`:"Detail"));function m(e){const l={LOW:"Low",MEDIUM:"Medium",HIGH:"High",SPECIAL:"Special"};return e?l[e.severity]||e.severity:""}function k(e){const l={DRAFT:"Draft",SUBMITTED:"Submitted",PENDING_DEPT:"Pending",PENDING_LEADER:"Pending",PENDING_BOD:"Pending",NEED_MORE_INFO:"Need more info",REJECTED:"Rejected",APPROVED:"Approved",IN_PROGRESS:"In Progress",WAITING_REQUESTER:"Waiting Requester",RESOLVED:"Resolved",CLOSED:"Closed",REOPENED:"Reopened"};return e?l[e.status]||e.status:""}function h(){p.value&&t.id&&r.dispatch("support/addComment",{id:t.id,comment:p.value,author:"me"}).then((()=>{p.value="",v(t.id)}))}function E(){t.id&&r.dispatch("support/updateTicket",{id:t.id,patch:{assignee:"me"}}).then((()=>v(t.id)))}function R(){t.id&&r.dispatch("support/updateTicket",{id:t.id,patch:{status:"RESOLVED"}}).then((()=>v(t.id)))}return(e,l)=>{const t=(0,a.g2)("Textarea");return o?((0,a.uX)(),(0,a.CE)("div",Xe,[c.value?((0,a.uX)(),(0,a.CE)("div",el,"Loading...")):((0,a.uX)(),(0,a.CE)("div",Ue,[(0,a.Lk)("div",We,[(0,a.Lk)("div",Ge,[(0,a.Lk)("h3",null,(0,s.v_)(d.value?.code)+" - "+(0,s.v_)(d.value?.title),1),(0,a.bF)((0,n.R1)(Ee),{value:m(d.value),class:"p-mr-2"},null,8,["value"]),(0,a.bF)((0,n.R1)(Ee),{value:k(d.value),severity:"info"},null,8,["value"])]),(0,a.Lk)("div",Ke,[(0,a.Lk)("small",null,"SLA: "+(0,s.v_)(d.value?.sla?.resolveDueHours)+"h",1)])]),(0,a.Lk)("div",Be,[(0,a.Lk)("div",Qe,[je,(0,a.Lk)("p",null,[$e,(0,a.eW)(" "+(0,s.v_)(d.value?.department),1)]),(0,a.Lk)("p",null,[qe,(0,a.eW)(" "+(0,s.v_)(d.value?.location),1)]),(0,a.Lk)("p",null,[He,(0,a.eW)(" "+(0,s.v_)(d.value?.contactPhone),1)])]),(0,a.Lk)("div",Ye,[Je,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.value?.history,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},(0,s.v_)(e.at)+" - "+(0,s.v_)(e.actor)+" - "+(0,s.v_)(e.action)+" "+(0,s.v_)(e.message?"("+e.message+")":""),1)))),128))])])]),(0,a.Lk)("div",null,[ze,(0,a.Lk)("div",null,[(0,a.bF)(t,{modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=e=>p.value=e),rows:"3",placeholder:"Add a comment"},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(A.A),{label:"Send",onClick:h})]),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.value?.comments,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.eW)((0,s.v_)(e.createdAt)+" - ",1),(0,a.Lk)("b",null,(0,s.v_)(e.author),1),(0,a.eW)(": "+(0,s.v_)(e.message),1)])))),128))])]),(0,a.Lk)("div",Ze,[(0,a.bF)((0,n.R1)(A.A),{label:"Assign to me",icon:"pi pi-user",onClick:E}),(0,a.bF)((0,n.R1)(A.A),{label:"Mark as Resolved",icon:"pi pi-check",class:"p-button-success",onClick:R})])]))])):((0,a.uX)(),(0,a.Wv)((0,n.R1)(w.A),{key:0,visible:u.value,"onUpdate:visible":l[1]||(l[1]=e=>u.value=e),header:(0,n.R1)(b),modal:!0,style:{width:"900px"}},{default:(0,a.k6)((()=>[c.value?((0,a.uX)(),(0,a.CE)("div",Me,"Loading...")):((0,a.uX)(),(0,a.CE)("div",ye,[(0,a.Lk)("div",Ae,[(0,a.Lk)("div",_e,[(0,a.Lk)("h3",null,(0,s.v_)(d.value?.code)+" - "+(0,s.v_)(d.value?.title),1),(0,a.bF)((0,n.R1)(Ee),{value:m(d.value),class:"p-mr-2"},null,8,["value"]),(0,a.bF)((0,n.R1)(Ee),{value:k(d.value),severity:"info"},null,8,["value"])]),(0,a.Lk)("div",De,[(0,a.Lk)("small",null,"SLA: "+(0,s.v_)(d.value?.sla?.resolveDueHours)+"h",1)])]),(0,a.Lk)("div",Ie,[(0,a.Lk)("div",Pe,[Fe,(0,a.Lk)("p",null,[Se,(0,a.eW)(" "+(0,s.v_)(d.value?.department),1)]),(0,a.Lk)("p",null,[we,(0,a.eW)(" "+(0,s.v_)(d.value?.location),1)]),(0,a.Lk)("p",null,[Te,(0,a.eW)(" "+(0,s.v_)(d.value?.contactPhone),1)])]),(0,a.Lk)("div",xe,[Ne,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.value?.history,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},(0,s.v_)(e.at)+" - "+(0,s.v_)(e.actor)+" - "+(0,s.v_)(e.action)+" "+(0,s.v_)(e.message?"("+e.message+")":""),1)))),128))])])]),(0,a.Lk)("div",null,[Ve,(0,a.Lk)("div",null,[(0,a.bF)(t,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=e=>p.value=e),rows:"3",placeholder:"Add a comment"},null,8,["modelValue"]),(0,a.bF)((0,n.R1)(A.A),{label:"Send",onClick:h})]),(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(d.value?.comments,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},[(0,a.eW)((0,s.v_)(e.createdAt)+" - ",1),(0,a.Lk)("b",null,(0,s.v_)(e.author),1),(0,a.eW)(": "+(0,s.v_)(e.message),1)])))),128))])]),(0,a.Lk)("div",Oe,[(0,a.bF)((0,n.R1)(A.A),{label:"Assign to me",icon:"pi pi-user",onClick:E}),(0,a.bF)((0,n.R1)(A.A),{label:"Mark as Resolved",icon:"pi pi-check",class:"p-button-success",onClick:R})])]))])),_:1},8,["visible","header"]))}}});const tl=(0,E.A)(ll,[["__scopeId","data-v-30c6e291"]]);var al=tl;const nl=[{label:"Requester",value:"REQUESTER"},{label:"Dept Approver",value:"DEPT_APPROVER"},{label:"Leader Approver",value:"LEADER_APPROVER"},{label:"BOD Approver",value:"BOD_APPROVER"},{label:"Processor",value:"PROCESSOR"},{label:"Admin",value:"ADMIN"}];var il=t(3751),sl={name:"Chip",emits:["remove"],props:{label:{type:String,default:null},icon:{type:String,default:null},image:{type:String,default:null},removable:{type:Boolean,default:!1},removeIcon:{type:String,default:"pi pi-times-circle"}},data(){return{visible:!0}},methods:{close(e){this.visible=!1,this.$emit("remove",e)}},computed:{containerClass(){return["p-chip p-component",{"p-chip-image":null!=this.image}]},iconClass(){return["p-chip-icon",this.icon]},removeIconClass(){return["p-chip-remove-icon",this.removeIcon]}}};const ol=["src"],ul={key:2,class:"p-chip-text"};function rl(e,l,t,n,i,o){return i.visible?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,s.C4)(o.containerClass)},[(0,a.RG)(e.$slots,"default",{},(()=>[t.image?((0,a.uX)(),(0,a.CE)("img",{key:0,src:t.image},null,8,ol)):t.icon?((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,s.C4)(o.iconClass)},null,2)):(0,a.Q3)("",!0),t.label?((0,a.uX)(),(0,a.CE)("div",ul,(0,s.v_)(t.label),1)):(0,a.Q3)("",!0)])),t.removable?((0,a.uX)(),(0,a.CE)("span",{key:0,tabindex:"0",class:(0,s.C4)(o.removeIconClass),onClick:l[0]||(l[0]=(...e)=>o.close&&o.close(...e)),onKeydown:l[1]||(l[1]=(0,il.jR)(((...e)=>o.close&&o.close(...e)),["enter"]))},null,34)):(0,a.Q3)("",!0)],2)):(0,a.Q3)("",!0)}function dl(e,l){void 0===l&&(l={});var t=l.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var cl="\n.p-chip {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-chip-text {\n    line-height: 1.5;\n}\n.p-chip-icon.pi {\n    line-height: 1.5;\n}\n.p-chip-remove-icon {\n    line-height: 1.5;\n    cursor: pointer;\n}\n.p-chip img {\n    border-radius: 50%;\n}\n";dl(cl),sl.render=rl;var pl=t(2910),vl=t(3890),bl=t(9908),ml={name:"Sidebar",emits:["update:visible","show","hide"],inheritAttrs:!1,props:{visible:{type:Boolean,default:!1},position:{type:String,default:"left"},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},dismissable:{type:Boolean,default:!0},showCloseIcon:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},ariaCloseLabel:{type:String,default:"close"}},mask:null,maskClickListener:null,container:null,beforeUnmount(){this.destroyModal(),this.container&&this.autoZIndex&&vl.Q$.clear(this.container),this.container=null},methods:{hide(){this.$emit("update:visible",!1)},onEnter(e){this.$emit("show"),this.autoZIndex&&vl.Q$.set("modal",e,this.baseZIndex||this.$primevue.config.zIndex.modal),this.focus(),this.modal&&!this.fullScreen&&this.enableModality()},onLeave(){this.$emit("hide"),this.modal&&!this.fullScreen&&this.disableModality()},onAfterLeave(e){this.autoZIndex&&vl.Q$.clear(e)},focus(){let e=vl.DV.findSingle(this.container,"input,button");e&&e.focus()},enableModality(){this.mask||(this.mask=document.createElement("div"),this.mask.setAttribute("class","p-sidebar-mask p-component-overlay p-component-overlay-enter"),this.mask.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1),this.dismissable&&this.bindMaskClickListener(),document.body.appendChild(this.mask),vl.DV.addClass(document.body,"p-overflow-hidden"))},disableModality(){this.mask&&(vl.DV.addClass(this.mask,"p-component-overlay-leave"),this.mask.addEventListener("animationend",(()=>{this.destroyModal()})))},bindMaskClickListener(){this.maskClickListener||(this.maskClickListener=()=>{this.hide()},this.mask.addEventListener("click",this.maskClickListener))},unbindMaskClickListener(){this.maskClickListener&&(this.mask.removeEventListener("click",this.maskClickListener),this.maskClickListener=null)},destroyModal(){this.mask&&(this.unbindMaskClickListener(),document.body.removeChild(this.mask),vl.DV.removeClass(document.body,"p-overflow-hidden"),this.mask=null)},containerRef(e){this.container=e}},computed:{containerClass(){return["p-sidebar p-component p-sidebar-"+this.position,{"p-sidebar-active":this.visible,"p-input-filled":"filled"===this.$primevue.config.inputStyle,"p-ripple-disabled":!1===this.$primevue.config.ripple}]},fullScreen(){return"full"===this.position}},directives:{ripple:bl.A}};const kl=["aria-modal"],hl={class:"p-sidebar-header"},El={key:0,class:"p-sidebar-header-content"},Rl=["aria-label"],fl=(0,a.Lk)("span",{class:"p-sidebar-close-icon pi pi-times"},null,-1),Ll=[fl],gl={class:"p-sidebar-content"};function Cl(e,l,t,n,i,s){const o=(0,a.gN)("ripple");return(0,a.uX)(),(0,a.Wv)(a.Im,{to:"body"},[(0,a.bF)(il.eB,{name:"p-sidebar",onEnter:s.onEnter,onLeave:s.onLeave,onAfterLeave:s.onAfterLeave,appear:""},{default:(0,a.k6)((()=>[t.visible?((0,a.uX)(),(0,a.CE)("div",(0,a.v6)({key:0,class:s.containerClass,ref:s.containerRef,role:"complementary","aria-modal":t.modal},e.$attrs),[(0,a.Lk)("div",hl,[e.$slots.header?((0,a.uX)(),(0,a.CE)("div",El,[(0,a.RG)(e.$slots,"header")])):(0,a.Q3)("",!0),t.showCloseIcon?(0,a.bo)(((0,a.uX)(),(0,a.CE)("button",{key:1,class:"p-sidebar-close p-sidebar-icon p-link",onClick:l[0]||(l[0]=(...e)=>s.hide&&s.hide(...e)),"aria-label":t.ariaCloseLabel,type:"button"},Ll,8,Rl)),[[o]]):(0,a.Q3)("",!0)]),(0,a.Lk)("div",gl,[(0,a.RG)(e.$slots,"default")])],16,kl)):(0,a.Q3)("",!0)])),_:3},8,["onEnter","onLeave","onAfterLeave"])])}function yl(e,l){void 0===l&&(l={});var t=l.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Al="\n.p-sidebar {\n    position: fixed;\n    -webkit-transition: -webkit-transform .3s;\n    transition: -webkit-transform .3s;\n    transition: transform .3s;\n    transition: transform .3s, -webkit-transform .3s;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.p-sidebar-content {\n    position: relative;\n    overflow-y: auto;\n}\n.p-sidebar-header {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n}\n.p-sidebar-icon {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    position: relative;\n    overflow: hidden;\n}\n.p-sidebar-left {\n    top: 0;\n    left: 0;\n    width: 20rem;\n    height: 100%;\n}\n.p-sidebar-right {\n    top: 0;\n    right: 0;\n    width: 20rem;\n    height: 100%;\n}\n.p-sidebar-top {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 10rem;\n}\n.p-sidebar-bottom {\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 10rem;\n}\n.p-sidebar-full {\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    -webkit-transition: none;\n    transition: none;\n}\n.p-sidebar-left.p-sidebar-enter-from,\n.p-sidebar-left.p-sidebar-leave-to {\n    -webkit-transform: translateX(-100%);\n            transform: translateX(-100%);\n}\n.p-sidebar-right.p-sidebar-enter-from,\n.p-sidebar-right.p-sidebar-leave-to {\n    -webkit-transform: translateX(100%);\n            transform: translateX(100%);\n}\n.p-sidebar-top.p-sidebar-enter-from,\n.p-sidebar-top.p-sidebar-leave-to {\n    -webkit-transform: translateY(-100%);\n            transform: translateY(-100%);\n}\n.p-sidebar-bottom.p-sidebar-enter-from,\n.p-sidebar-bottom.p-sidebar-leave-to {\n    -webkit-transform: translateY(100%);\n            transform: translateY(100%);\n}\n.p-sidebar-full.p-sidebar-enter-from,\n.p-sidebar-full.p-sidebar-leave-to {\n    opacity: 0;\n}\n.p-sidebar-full.p-sidebar-enter-active,\n.p-sidebar-full.p-sidebar-leave-active {\n    -webkit-transition: opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1);\n    transition: opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1);\n}\n.p-sidebar-left.p-sidebar-sm,\n.p-sidebar-right.p-sidebar-sm {\n    width: 20rem;\n}\n.p-sidebar-left.p-sidebar-md,\n.p-sidebar-right.p-sidebar-md {\n    width: 40rem;\n}\n.p-sidebar-left.p-sidebar-lg,\n.p-sidebar-right.p-sidebar-lg {\n    width: 60rem;\n}\n.p-sidebar-top.p-sidebar-sm,\n.p-sidebar-bottom.p-sidebar-sm {\n    height: 10rem;\n}\n.p-sidebar-top.p-sidebar-md,\n.p-sidebar-bottom.p-sidebar-md {\n    height: 20rem;\n}\n.p-sidebar-top.p-sidebar-lg,\n.p-sidebar-bottom.p-sidebar-lg {\n    height: 30rem;\n}\n@media screen and (max-width: 64em) {\n.p-sidebar-left.p-sidebar-lg,\n    .p-sidebar-left.p-sidebar-md,\n    .p-sidebar-right.p-sidebar-lg,\n    .p-sidebar-right.p-sidebar-md {\n        width: 20rem;\n}\n}\n";yl(Al),ml.render=Cl;var _l=t(878),Dl=t(8410);const Il=e=>((0,a.Qi)("data-v-2d880f6d"),e=e(),(0,a.jt)(),e),Pl={class:"support-page"},Fl={class:"page-header"},Sl={class:"title-block"},wl=Il((()=>(0,a.Lk)("div",{class:"title-row"},[(0,a.Lk)("span",{class:"page-title"},"Support Management"),(0,a.Lk)("span",{class:"page-subtitle"},"Track • Approve • Coordinate • Monitor SLA")],-1))),Tl={class:"kpi-row"},xl={class:"header-actions"},Nl={class:"toolbar"},Vl={class:"toolbar-left"},Ol={class:"p-input-icon-left search"},Ml=Il((()=>(0,a.Lk)("i",{class:"pi pi-search"},null,-1))),Xl=Il((()=>(0,a.Lk)("div",{class:"toolbar-right"},[(0,a.Lk)("div",{class:"hint"},[(0,a.Lk)("i",{class:"pi pi-info-circle"}),(0,a.Lk)("span",null,[(0,a.eW)(" The "),(0,a.Lk)("b",null,"Approval Center"),(0,a.eW)(" tab only shows requests within the selected role's scope. ")])])],-1))),Ul={class:"content-card"},Wl=Il((()=>(0,a.Lk)("div",{class:"tab-header"},[(0,a.Lk)("i",{class:"pi pi-chart-bar"}),(0,a.Lk)("span",null,"Dashboard")],-1))),Gl={class:"tab-header"},Kl=Il((()=>(0,a.Lk)("i",{class:"pi pi-list"},null,-1))),Bl=Il((()=>(0,a.Lk)("span",null,"Support List",-1))),Ql={class:"tab-header"},jl=Il((()=>(0,a.Lk)("i",{class:"pi pi-verified"},null,-1))),$l=Il((()=>(0,a.Lk)("span",null,"Approval Center",-1))),ql=Il((()=>(0,a.Lk)("div",{class:"tab-header"},[(0,a.Lk)("i",{class:"pi pi-file"}),(0,a.Lk)("span",null,"Reports")],-1))),Hl=Il((()=>(0,a.Lk)("div",{class:"tab-header"},[(0,a.Lk)("i",{class:"pi pi-cog"}),(0,a.Lk)("span",null,"Settings")],-1))),Yl=Il((()=>(0,a.Lk)("div",{class:"detail-title"},[(0,a.Lk)("i",{class:"pi pi-ticket"}),(0,a.Lk)("span",null,"Ticket Detail")],-1)));var Jl=(0,a.pM)({setup(e){const l=(0,i.Pj)(),t=(0,n.KR)(!1),s=(0,n.KR)(null),o=(0,n.KR)(!1),u=(0,n.KR)(""),r=nl,d=(0,n.KR)(l.state.support?.role||"REQUESTER"),c=(0,n.EW)((()=>l.state.support?.tickets||[])),p=(0,n.EW)((()=>c.value.length)),v=(0,n.EW)((()=>{const e=new Set(["PENDING_DEPT","PENDING_LEADER","PENDING_BOD"]);return c.value.filter((l=>e.has(l.status))).length})),b=(0,n.EW)((()=>{const e=Date.now();return c.value.filter((l=>{if("boolean"===typeof l.isOverdue)return l.isOverdue;if(!l.dueAt)return!1;const t=new Date(l.dueAt).getTime();return Number.isFinite(t)&&t<e&&!["RESOLVED","CLOSED"].includes(l.status)})).length})),m=(0,n.EW)((()=>c.value.filter((e=>"IN_PROGRESS"===e.status)).length)),k=(0,n.EW)((()=>c.value.filter((e=>["RESOLVED","CLOSED"].includes(e.status))).length));function h(){t.value=!0}function E(){t.value=!1,l.dispatch("support/fetchTickets")}function R(e){s.value=e,o.value=!0}function L(){o.value=!1,s.value=null}function g(e){l.commit("support/setRole",e.value),_()}function _(){l.dispatch("support/fetchTickets",{keyword:u.value})}(0,a.wB)(o,(e=>{const l=document.querySelector(".layout-main");l&&l.classList.toggle("detail-open",!!e)})),(0,a.xo)((()=>{const e=document.querySelector(".layout-main");e&&e.classList.remove("detail-open")}));let D=null;function I(){D&&window.clearTimeout(D),D=window.setTimeout((()=>_()),300)}return(0,a.sV)((()=>{_()})),(e,l)=>((0,a.uX)(),(0,a.CE)("div",Pl,[(0,a.Lk)("div",Fl,[(0,a.Lk)("div",Sl,[wl,(0,a.Lk)("div",Tl,[(0,a.bF)((0,n.R1)(sl),{class:"kpi",label:`Total: ${(0,n.R1)(p)}`,icon:"pi pi-ticket"},null,8,["label"]),(0,a.bF)((0,n.R1)(sl),{class:"kpi warn",label:`Pending: ${(0,n.R1)(v)}`,icon:"pi pi-clock"},null,8,["label"]),(0,a.bF)((0,n.R1)(sl),{class:"kpi danger",label:`Overdue: ${(0,n.R1)(b)}`,icon:"pi pi-exclamation-triangle"},null,8,["label"]),(0,a.bF)((0,n.R1)(sl),{class:"kpi",label:`In Progress: ${(0,n.R1)(m)}`,icon:"pi pi-cog"},null,8,["label"]),(0,a.bF)((0,n.R1)(sl),{class:"kpi success",label:`Resolved: ${(0,n.R1)(k)}`,icon:"pi pi-check"},null,8,["label"])])]),(0,a.Lk)("div",xl,[(0,a.bF)((0,n.R1)(C.A),{options:(0,n.R1)(r),modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),optionLabel:"label",optionValue:"value",placeholder:"Select role",class:"role-dd",onChange:g},null,8,["options","modelValue"]),(0,a.bF)((0,n.R1)(A.A),{label:"Create Request",icon:"pi pi-plus",class:"p-button-success",onClick:h})])]),(0,a.Lk)("div",Nl,[(0,a.Lk)("div",Vl,[(0,a.Lk)("span",Ol,[Ml,(0,a.bF)((0,n.R1)(y.A),{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),placeholder:"Search by code / title / department...",onInput:I},null,8,["modelValue"])]),(0,a.bF)((0,n.R1)(A.A),{icon:"pi pi-refresh",label:"Refresh",class:"p-button-outlined",onClick:_})]),Xl]),(0,a.Lk)("div",Ul,[(0,a.bF)((0,n.R1)(F.A),null,{default:(0,a.k6)((()=>[(0,a.bF)((0,n.R1)(S.A),null,{header:(0,a.k6)((()=>[Wl])),default:(0,a.k6)((()=>[(0,a.bF)(f)])),_:1}),(0,a.bF)((0,n.R1)(S.A),null,{header:(0,a.k6)((()=>[(0,a.Lk)("div",Gl,[Kl,Bl,(0,n.R1)(p)>0?((0,a.uX)(),(0,a.Wv)((0,n.R1)(pl.A),{key:0,value:(0,n.R1)(p),class:"ml-2"},null,8,["value"])):(0,a.Q3)("",!0)])])),default:(0,a.k6)((()=>[(0,a.bF)(P,{onOpenDetail:R})])),_:1}),(0,a.bF)((0,n.R1)(S.A),null,{header:(0,a.k6)((()=>[(0,a.Lk)("div",Ql,[jl,$l,(0,n.R1)(v)>0?((0,a.uX)(),(0,a.Wv)((0,n.R1)(pl.A),{key:0,value:(0,n.R1)(v),severity:"warning",class:"ml-2"},null,8,["value"])):(0,a.Q3)("",!0)])])),default:(0,a.k6)((()=>[(0,a.bF)(X)])),_:1}),(0,a.bF)((0,n.R1)(S.A),null,{header:(0,a.k6)((()=>[ql])),default:(0,a.k6)((()=>[(0,a.bF)(q)])),_:1}),(0,a.bF)((0,n.R1)(S.A),null,{header:(0,a.k6)((()=>[Hl])),default:(0,a.k6)((()=>[(0,a.bF)(ee)])),_:1})])),_:1})]),(0,a.bF)(he,{visible:t.value,"onUpdate:visible":l[2]||(l[2]=e=>t.value=e),onCreated:E},null,8,["visible"]),(0,a.bF)((0,n.R1)(ml),{visible:o.value,"onUpdate:visible":l[3]||(l[3]=e=>o.value=e),position:"right",class:"detail-sidebar",showCloseIcon:!0},{header:(0,a.k6)((()=>[Yl])),default:(0,a.k6)((()=>[s.value?((0,a.uX)(),(0,a.Wv)(al,{key:0,id:s.value,inline:"",onClose:L},null,8,["id"])):(0,a.Q3)("",!0)])),_:1},8,["visible"]),(0,a.bF)((0,n.R1)(_l.A)),(0,a.bF)((0,n.R1)(Dl.A))]))}});const zl=(0,E.A)(Jl,[["__scopeId","data-v-2d880f6d"]]);var Zl=zl}}]);
//# sourceMappingURL=279.0502ef23.js.map